---
title: Preview And Speed
description: Information about lookahead, target speed, gain scheduling, and smoothing choices.
keywords: ["controllers", "preview", "speed planning"]
---

## What we build here

A simple, reliable baseline:

- **Lateral:** preview-based geometric steering  
- **Longitudinal:** target speed from curvature, tracked with PID  
- **Shaping:** gain scheduling and rate limits

<Separator className="my-10" />

## Preview targeting (common ingredient)

Pick a target point ahead along the path using lookahead $L$.

$$
e_\psi=\text{wrap}(\psi_{\text{target}}-\psi)
$$

<div className="my-6 rounded-2xl border bg-muted/20 p-6 text-center text-sm text-muted-foreground">
  [INTERACTIVE PLACEHOLDER] Lookahead demo on S-bend with $L$ slider + heading error plot
</div>

<Separator className="my-10" />

## Longitudinal: target speed + PID

Target speed is curvature-limited (see Plant & Limits), then tracked:

$$
e_v = v_t - v
$$

$$
a_x = K_p e_v + K_i\int e_v\,dt + K_d\frac{de_v}{dt}
$$

Clamp and shape:
$$
a_x \leftarrow \text{clip}(a_x,\,-a_{x,\max},\,a_{x,\max}),\quad |\dot a_x|\le j_{\max}.
$$

<div className="my-6 rounded-2xl border bg-muted/20 p-6 text-sm text-muted-foreground">
  [PLOT PLACEHOLDER] $v(t)$ tracking $v_t(t)$ through hairpin; show overshoot vs stable tuning
</div>

<Separator className="my-10" />

## Gain scheduling and smoothing

At higher speeds, steering authority should be reduced to avoid chatter.

Example schedule:
$$
k_\delta(v)=\frac{k_0}{1+\alpha v^2}.
$$

And steering rate limiting:
$$
|\dot{\delta}|\le \dot{\delta}_{\max}.
$$

<div className="my-6 rounded-2xl border bg-muted/20 p-6 text-sm text-muted-foreground">
  [MINI-DEMO PLACEHOLDER] Fixed gain vs scheduled gain; show oscillation reduction
</div>

<Separator className="my-10" />

## Takeaway

This baseline is already “good enough” to drive a lap.
Next, we’ll make driving **style** explicit.
