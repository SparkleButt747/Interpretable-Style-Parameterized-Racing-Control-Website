---
title: The Problem Explained
description: Summarizes the control problem, objectives, and failure modes that motivate the style-parameterized approach.
keywords: ["control problem", "failure modes", "racing objectives"]
---

{/* The Problem Explained — MDX block
    Place under: app/(learn)/introduction/setting-the-stage/problem/page.mdx
    Replace placeholders with real components when ready.
*/}

import { Separator } from "@/components/ui/separator";
// import PathSchematic from "@/components/stage/PathSchematic";
// import ErrorDecomposition from "@/components/stage/ErrorDecomposition";
// import ConstraintOverlays from "@/components/stage/ConstraintOverlays";
// import NaiveToggleDemo from "@/components/stage/NaiveToggleDemo";

<div className="mt-2 text-base leading-7 text-muted-foreground max-w-2xl">
  Every Δt, map the current vehicle state and a reference path to two commands:
  <strong> steering</strong> \(\delta\) and <strong>longitudinal</strong> \(a_x\).
  Goal: stay near the path, respect limits, finish fast and clean.
</div>

<Separator className="my-8" />

## What information we provide

**Outputs we control**
- Steering \(\delta\) (rad)
- Longitudinal \(a_x\) (m/s²; throttle/brake)

**State we assume we know**
- Position \((x,y)\), heading \(\psi\), speed \(v\)

**Reference path**
- \(\gamma(s)=(x(s),y(s))\), arc length \(s\), curvature \(\kappa(s)\)

**Environment / limits**
```math
- Grip \(\mu\); actuator bounds \(|\delta|\le\delta_{\max}\), \(|a_x|\le a_{x,\max}\)
```

<div className="my-6 rounded-2xl border bg-muted/20 px-5 py-6 text-sm text-muted-foreground">
  [DIAGRAM PLACEHOLDER] Centerline + lookahead target, heading error arrow, labels for \(\delta\), \(a_x\).
  {/* <PathSchematic /> */}
</div>


> We’re not tackling perception here. Assume a clean path and reasonable state estimation so we can study **control** without noise.

<Separator className="my-10" />

## Minimal formalism

We seek a policy:
\[
\pi:\;\{x,y,\psi,v,\gamma,\kappa,\mu\}\;\mapsto\;\{\delta,\;a_x\}.
\]

Teaching surrogate over horizon \(T\):
```math
J=\int_0^T\!\left(w_c e_\perp^2 + w_\ell e_\parallel^2 + w_u \|\mathbf{u}\|^2 + w_r \|\dot{\mathbf{u}}\|^2\right)\,dt\;-\;w_p\,\Delta s(T),\quad \mathbf{u}=[\delta,a_x].
```

We won’t solve this optimally in-browser. Instead, we’ll use **interpretable rules** that approximate good behaviour and make **style** explicit.

<div className="my-6 rounded-2xl border bg-muted/20 px-5 py-6 text-sm text-muted-foreground">
  [DIAGRAM PLACEHOLDER] Contouring vs lag error relative to path.
  {/* <ErrorDecomposition /> */}
</div>

<Separator className="my-10" />

## Constraints that matter

**Friction circle:**
\[
(a_x)^2 + (v^2\kappa)^2 \le (\mu g)^2.
\]

**Actuators:**
```math
|\delta|\le \delta_{\max},\quad |\dot\delta|\le \dot\delta_{\max},\quad |a_x|\le a_{x,\max}.
```

**Curvature→speed (smoothed target):**
```math
v_t(s)\approx \sqrt{\frac{\mu g}{|\kappa(s)|+\epsilon}}.
```

<div className="my-6 rounded-2xl border bg-muted/20 px-5 py-6 text-sm text-muted-foreground">
  [OVERLAY PLACEHOLDER] Curvature heatmap on track + speed target band + friction donut.
  {/* <ConstraintOverlays /> */}
</div>


<Separator className="my-10" />

## Naive baseline (and why it fails)

**Rule:** aim at a point \(L\) meters ahead on the centerline; steer ∝ heading error; throttle falls.

**Symptoms:** small \(L\) → **oscillation**; large \(L\) → **lazy apex**; corner entry too fast (ignores curvature); rough commands (no smoothing).

<div className="my-6 rounded-2xl border bg-muted/20 px-5 py-6 text-sm text-muted-foreground">
  [INTERACTIVE PLACEHOLDER] Toggle: Naive vs Improved (preview+curvature→speed+gain scheduling).
  {/* <NaiveToggleDemo /> */}
</div>

<Separator className="my-10" />


## Controller I/O (per tick)

**Inputs**
- `state`: \((x,y,\psi,v)\)
- `path`: samples \(\gamma(s_i)\), curvature \(\kappa(s_i)\)
- `params`: lookahead \(L\), style knobs (apex offset, entry/exit bias, risk, smoothness)
```math
- `limits`: \(\mu, \delta_{\max}, \dot\delta_{\max}, a_{x,\max}\)
```

**Outputs**
- `steer`: \(\delta\)
- `long`: \(a_x\)

<Separator className="my-10" />

## Quick glossary

- **Preview / Lookahead** — pick a target ahead along the path.  
- **Curvature \(\kappa\)** — path tightness; larger \(|\kappa|\) ⇒ lower feasible speed.  
- **Contouring / Lag error** — lateral vs along-track mismatch.  
- **Risk** — how much of the grip budget we’re willing to use near bends.  
- **Smoothness** — jerk/rate limits on \(\delta\), \(a_x\).

<br />